#!/usr/bin/env node

const loadJson = (fileName) => {
  // load json file
  const fs = require("node:fs");

  const config = JSON.parse(fs.readFileSync(fileName, "utf8"));
  console.log("Config:", config);
  return config;
};

// TODO: find file in preset store folder
const setCommandHandler = ({ preset }) => {
  console.log(`preset file: ${preset}`);

  const config = loadJson(preset);

  commands = require("yb-js").commands;
  commands.setPreset(config);
};

// parse argument
const yargs = require("yargs/yargs");
const { hideBin } = require("yargs/helpers");
const argv = yargs(hideBin(process.argv))
  .command({
    command: "set <preset>",
    desc: "set yabai workspace preset",
    builder: (yargs) => {
      yargs.positional("preset", {
        describe: "preset_file",
      });
    },
    handler: setCommandHandler,
  })
  .strict()
  .help("h")
  .parse();
